<div ng-controller='ExAudioController'>
    <div class="modal fade bs-example-modal-sm" id="audioTextModal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Loo uus kuulamise harjutus</h4>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="alert alert-danger alert-dismissable" role="alert" ng-show="errorAlert.show">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <strong>Viga!</strong> {{ errorAlert.text }}
                        </div>
                        <div class="form-inline form-group">
                            <label for="newAudioText">Sisesta tekst</label>
                            <textarea class="form-control" id="newAudioText" ng-model="newAudioExeText" cols="70" rows="5"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" id="loadingExeButton" type="button" data-loading-text="<i class='fa fa-spinner fa-pulse'></i> Loon harjutust" ng-click="createNewAudioExe()">Loo harjutus</button>
                    <button class="btn btn-warning" type="button" data-dismiss="modal">Tühista</button>
                </div>
            </div>
        </div>
    </div>
    <h2>Kuulamise harjutus</h2>
    <div class="alert alert-info alert-dismissible" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <strong>Tähelepanu!</strong> Enne harjutusega alustamist on soovitav testida, kas heli tugevus ja kiirus sobivad. Harjutuse ajal ei ole võimalik<br>
        muuta teksti lugemise kiirust. Peale harjutuse käivitamist, ei ole võimalik seda pausile panna, saab ainult lõpetada!
    </div>
    <div class="audio-test">
        <button class="btn btn-primary audio-test-button" ng-click="audioTesting.paused ? audioTesting.play() : audioTesting.pause()"><span class="glyphicon" ng-class="{'glyphicon-play': audioTesting.paused, 'glyphicon-pause': !audioTesting.paused}" aria-hidden="true"></span> Testimine</button>
        <div class="audio-slider">
            <div class="slider">
                <div class="slider-header">Heli tugevus:</div>
                <div class="slider-body">
                <rzslider rz-slider-model="sliderVolume.value" rz-slider-options="sliderVolume.options"></rzslider>
                </div>
            </div>
            <div class="slider">
                <div class="slider-header">Heli kiirus:</div>
                <div class="slider-body">
                <rzslider rz-slider-model="sliderPlayback.value" rz-slider-options="sliderPlayback.options"></rzslider>
                </div>
            </div>
        </div>
    </div>
    <button class="btn btn-primary" ng-click="endExe()">Lõpeta</button>
    <button class="btn btn-primary" ng-click="startExe()"><span class="glyphicon glyphicon-play" aria-hidden="true"></span> Alusta</button>
    <button class="btn btn-info" data-toggle="modal" data-target="#audioTextModal">Sisesta oma tekst</button>
    <div class="alert alert-success alert-dismissible alert-margin" role="alert" ng-show="successAlert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <strong>Õnnestus!</strong> Uus harjutus on loodud ning harjutamiseks vajuta nuppu Alusta.
    </div>
    <div class="audio-line" ng-show="textVisibility">
        <div class="audio-track">{{audio.remaining | audioTrackTime}}</div>
        <div class="slider-progress">
            <rzslider rz-slider-model="sliderProgress.value" rz-slider-options="sliderProgress.options"></rzslider>
        </div>
    </div>
    <textarea class="form-control" rows="4" ng-disabled="textDisabled" ng-model="textInserted" ng-show="textVisibility"></textarea>
    <div class="answer-text" ng-hide="textVisibility">
        <div class="stat_info">Õigeid: {{ audioExerResult.typed.correct }}  Valesid: {{ audioExerResult.typed.wrong }}  Kokku: {{ audioExerResult.typed.all }}/{{audioExerResult.correct.all}}</div>
        <!--<span ng-repeat="word in textChecked">
            <span ng-repeat="lett in word" ng-class="{letter_green: lett.correct, letter_red: !lett.correct}">{{lett.letter}}</span>
        </span>-->
        <div diff left-obj="textInserted" right-obj="correctAnswer" options="diffOptions"></div>
        <div>
        <button class="btn btn-primary" ng-click="toggleCorrect()">Näita vastust</button>
        </div>
    </div>
    <div class="answer-text" ng-hide="correctHide">
        {{correctAnswer}}
    </div>
</div>